#version 330

in vec3 pixcolor;
out vec4 color;
void main()
{
   vec3 lightDir = vec3(0.0,0.0,5.0);
   vec3 N;
   N.xy = gl_PointCoord* 2.0 - vec2(1.0);
   
   float mag = dot(N.xy, N.xy);
   if(mag > 1.0) discard;
   N.z = sqrt(1.0-mag);

   float diffuse = max(0.0, dot(lightDir, N));
   color = vec4(pixcolor,1.0)*diffuse;
}